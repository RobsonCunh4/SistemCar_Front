{"remainingRequest":"C:\\xampp\\htdocs\\projects\\Start_3\\front\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\projects\\Start_3\\front\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\xampp\\htdocs\\projects\\Start_3\\front\\src\\service\\middleware.js","dependencies":[{"path":"C:\\xampp\\htdocs\\projects\\Start_3\\front\\src\\service\\middleware.js","mtime":1645398200949},{"path":"C:\\xampp\\htdocs\\projects\\Start_3\\front\\babel.config.js","mtime":1645225330072},{"path":"C:\\xampp\\htdocs\\projects\\Start_3\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645225258573},{"path":"C:\\xampp\\htdocs\\projects\\Start_3\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1645225271241},{"path":"C:\\xampp\\htdocs\\projects\\Start_3\\front\\node_modules\\eslint-loader\\index.js","mtime":1645225261494}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L3hhbXBwL2h0ZG9jcy9wcm9qZWN0cy9TdGFydF8zL2Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgQ29va2llIGZyb20gIkAvc2VydmljZS9jb29raWUiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgcmVkaXJlY3RJZk5vdEF1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIHJlZGlyZWN0SWZOb3RBdXRoZW50aWNhdGVkKHRvLCBmcm9tLCBuZXh0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgdG9rZW47CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB0b2tlbiA9IENvb2tpZS5nZXRUb2tlbigpOwoKICAgICAgICAgICAgICBpZiAoIXRva2VuKSB7CiAgICAgICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ2xvZ2luJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2F1dGgvbWUnKS50aGVuKGZ1bmN0aW9uICgpIHsvL3N0b3JlLmNvbW1pdCgndXNlci9zdG9yZScpCiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgQ29va2llLmRlbGV0ZVRva2VuKCk7CiAgICAgICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ2xvZ2luJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgbmV4dCgpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgcmVkaXJlY3RJZkF1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIHJlZGlyZWN0SWZBdXRoZW50aWNhdGVkKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgdG9rZW4gPSBDb29raWUuZ2V0VG9rZW4oKTsKCiAgICBpZiAodG9rZW4pIHsKICAgICAgbmV4dCh7CiAgICAgICAgbmFtZTogJ2Rhc2hib2FyZCcKICAgICAgfSk7CiAgICB9CgogICAgbmV4dCgpOwogIH0KfTs="},{"version":3,"sources":["C:/xampp/htdocs/projects/Start_3/front/src/service/middleware.js"],"names":["Cookie","axios","redirectIfNotAuthenticated","to","from","next","token","getToken","name","post","then","catch","deleteToken","redirectIfAuthenticated"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAc;AAEJC,EAAAA,0BAFI,sCAEuBC,EAFvB,EAE2BC,IAF3B,EAEiCC,IAFjC,EAEsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACtCC,cAAAA,KADsC,GAC9BN,MAAM,CAACO,QAAP,EAD8B;;AAG5C,kBAAG,CAACD,KAAJ,EAAU;AACND,gBAAAA,IAAI,CAAC;AAACG,kBAAAA,IAAI,EAAE;AAAP,iBAAD,CAAJ;AACH;;AAL2C;AAAA,qBAOtCP,KAAK,CAACQ,IAAN,CAAW,UAAX,EAAuBC,IAAvB,CAA4B,YAAI,CAClC;AACH,eAFK,EAEHC,KAFG,CAEG,YAAI;AACTX,gBAAAA,MAAM,CAACY,WAAP;AACAP,gBAAAA,IAAI,CAAC;AAACG,kBAAAA,IAAI,EAAE;AAAP,iBAAD,CAAJ;AACH,eALK,CAPsC;;AAAA;AAc5CH,cAAAA,IAAI;;AAdwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAe/C,GAjBS;AAmBVQ,EAAAA,uBAnBU,mCAmBcV,EAnBd,EAmBkBC,IAnBlB,EAmBwBC,IAnBxB,EAmB6B;AACnC,QAAMC,KAAK,GAAGN,MAAM,CAACO,QAAP,EAAd;;AAEA,QAAGD,KAAH,EAAS;AACLD,MAAAA,IAAI,CAAC;AAACG,QAAAA,IAAI,EAAE;AAAP,OAAD,CAAJ;AACH;;AAEDH,IAAAA,IAAI;AACP;AA3BS,CAAd","sourcesContent":["import Cookie from \"@/service/cookie\";\r\nimport axios from 'axios'\r\n\r\nexport default{\r\n\r\n    async redirectIfNotAuthenticated(to, from, next){\r\n        const token = Cookie.getToken();\r\n\r\n        if(!token){\r\n            next({name: 'login'});\r\n        }\r\n\r\n        await axios.post('/auth/me').then(()=>{\r\n            //store.commit('user/store')\r\n        }).catch(()=>{\r\n            Cookie.deleteToken();\r\n            next({name: 'login'});\r\n        });\r\n\r\n        next();\r\n    },\r\n\r\n    redirectIfAuthenticated(to, from, next){\r\n        const token = Cookie.getToken();\r\n\r\n        if(token){\r\n            next({name: 'dashboard'});\r\n        }\r\n\r\n        next();\r\n    }   \r\n}"]}]}